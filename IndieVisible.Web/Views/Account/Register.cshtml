@model MvcRegisterViewModel
@{
    ViewData["Title"] = SharedLocalizer["Register"];
    ViewData["CanonicalUrl"] = "https://www.indievisible.net/account/register/";
    Layout = "~/Views/Shared/_LayoutLoginRegister.cshtml";
}

<div class="register-box">
    <h1 class="sr-only">@ViewData["Title"]</h1>
    <div class="register-logo">
        <a asp-area="" asp-controller="account" asp-action="login">
            <span><img src="~/images/logo360w.png" class="embed-responsive" alt=""></span>
        </a>
    </div>

    <div class="register-box-body">
        <p class="login-box-msg">@SharedLocalizer["Register a new membership"]</p>
        <span asp-validation-for="AcceptTerms" class="text-danger"></span>

        <form asp-route-returnUrl="@ViewData["ReturnUrl"]" method="post" class="form-element" id="frmRegister">
            <div class="form-group has-feedback">
                <input asp-for="UserName" type="text" class="form-control" placeholder="@SharedLocalizer["UserName"]">
                <span class="ion ion-person form-control-feedback "></span>
                <span asp-validation-for="UserName" class="text-danger"></span>
            </div>
            <div class="form-group has-feedback">
                <input asp-for="Email" type="email" class="form-control" placeholder="@SharedLocalizer["Email"]">
                <span class="ion ion-email form-control-feedback "></span>
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>
            <div class="form-group has-feedback">
                <input asp-for="Password" type="password" class="form-control" placeholder="@SharedLocalizer["Password"]">
                <span class="ion ion-locked form-control-feedback "></span>
                <span asp-validation-for="Password" class="text-danger"></span>
            </div>
            <div class="form-group has-feedback">
                <input asp-for="ConfirmPassword" type="password" class="form-control" placeholder="@SharedLocalizer["Retype password"]">
                <span class="ion ion-log-in form-control-feedback "></span>
                <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="checkbox">
                        <input asp-for="AcceptTerms">
                        <label asp-for="AcceptTerms">@SharedLocalizer["I agree to the"] <b><a asp-area="" asp-controller="home" asp-action="terms">@SharedLocalizer["Terms"]</a></b></label>
                    </div>
                </div>
                <!-- /.col -->
                <div class="col-12 text-center">
                    <button type="submit" id="btnSubmitRegister" class="btn btn-info btn-block btn-flat margin-top-10">@SharedLocalizer["SIGN UP"]</button>
                </div>
                <!-- /.col -->
            </div>
        </form>

        <div class="social-auth-links text-center">
            <p>
                - @SharedLocalizer["OR"] -
            </p>
            <form asp-action="ExternalLogin" asp-route-returnurl="@ViewData["ReturnUrl"]" method="post" class="form-horizontal">
                <button type="submit" class="btn btn-social-icon btn-circle btn-facebook" name="provider" value="Facebook" title="Log in using your Facebook account"><i class="fab fa-facebook-f" aria-hidden="true"></i></button>
                <button type="submit" class="btn btn-social-icon btn-circle btn-google" name="provider" value="Google" title="Log in using your Google account"><i class="fab fa-google-plus-g" aria-hidden="true"></i></button>
                <button type="submit" class="btn btn-social-icon btn-circle btn-microsoft" name="provider" value="Microsoft" title="Log in using your Microsoft account"><i class="fab fa-microsoft" aria-hidden="true"></i></button>
            </form>
        </div>
        <!-- /.social-auth-links -->

        <div class="margin-top-20 text-center">
            <p>@SharedLocalizer["Already have an account?"] <a asp-area="" asp-controller="account" asp-action="login" class="text-info m-l-5">@SharedLocalizer["SIGN IN"]</a></p>
            <p>@SharedLocalizer["Don't want to Register?"] <a asp-area="" asp-controller="home" asp-action="index" class="text-info m-l-5">@SharedLocalizer["Continue browsing"]</a></p>
        </div>

    </div>
    <!-- /.form-box -->
</div>
<!-- /.register-box -->


@section Scripts {
    <script src="~/js/shared/alertsystem.js"></script>
    @await Html.PartialAsync("_ValidationScriptsPartial")

    <script>
        // extend jquery range validator to work for required checkboxes
        var defaultRangeValidator = $.validator.methods.range;
        $.validator.methods.range = function (value, element, param) {
            if (element.type === 'checkbox') {
                // if it's a checkbox return true if it is checked
                return element.checked;
            } else {
                // otherwise run the default validation function
                return defaultRangeValidator.call(this, value, element, param);
            }
        }

        $('#frmRegister').on('click', '#btnSubmitRegister', function (e) {
            //e.preventDefault();
            var form = $('#frmRegister');

            var aceito = $('#AcceptTerms').is(':checked');
            if (aceito === true) {
                if (form.valid()) {
                    form.submit();
                }
            }
            else {
                ALERTSYSTEM.ShowWarningMessage("You need to accept the terms to register!");
            }

            return false;
        });
    </script>
}