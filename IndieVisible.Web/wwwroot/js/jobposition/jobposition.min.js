var JOBPOSITION=function(){"use strict";function a(){v();c();p();i=n.container.find(t.canInteract).val();h=window.location.href.indexOf("add")>-1;u=window.location.href.indexOf("details")>-1;s=!h&&!u;s&&(f(!1,e),l(o));u&&n.ddlStatus.removeClass("invisible").show()}function v(){t.controlsidebar=".control-sidebar";t.canInteract="#caninteract";t.container=".content";t.containerDetails="#containerdetails";t.containerList="#containerlist";t.list="#divList";t.divListItem=".jobposition-item";t.btnNewJobPosition="#btn-jobposition-new";t.btnListMine="#btn-jobposition-listmine";t.form="#frmJobPositionSave";t.btnSave="#btnPostJobPosition";t.ddlStatus="#ddlStatus";t.btnEditJobPosition=".btnEditJobPosition";t.btnDeleteJobPosition=".btnDeleteJobPosition";t.chkRemote="#Remote";t.location="#Location";t.myPositionStats="#divMyPositionStats"}function c(){n.controlsidebar=$(t.controlsidebar);n.container=$(t.container);n.containerDetails=$(t.containerDetails);n.containerList=$(t.containerList);n.list=$(t.list);n.myPositionStats=$(t.myPositionStats);n.ddlStatus=$(t.ddlStatus)}function y(){n.location=$(t.location)}function p(){b();k();d();it();w();g();nt();tt()}function w(){n.container.on("change",t.ddlStatus,function(){var n=$(this).val(),t=$(this).data("url"),i=$(this).data("id"),r={selectedStatus:n,jobPositionId:i};$.post(t,r).done(function(n){n.success===!0?ALERTSYSTEM.ShowSuccessMessage("Awesome!",function(){window.location=n.url}):ALERTSYSTEM.ShowWarningMessage("An error occurred! Check the console!")})})}function b(){n.controlsidebar.on("click",t.btnNewJobPosition,function(){i&&rt()})}function k(){n.controlsidebar.on("click",t.btnListMine,function(){var n=$(this).data("url");i&&f(!0,n)})}function d(){n.containerDetails.on("click",t.btnSave,function(){var t=n.form.valid();t&&i&&ft()})}function g(){n.containerList.on("click",t.btnEditJobPosition,function(n){n.preventDefault();var t=$(this).data("url");i&&ut(t)})}function nt(){n.containerList.on("click",t.btnDeleteJobPosition,function(n){n.preventDefault();var i=$(this),r=$(this).data("url"),u=i.data("confirmationmessage"),s=i.data("confirmationtitle"),h=i.data("confirmationbuttontext"),c=i.data("cancelbuttontext");ALERTSYSTEM.ShowConfirmMessage(s,u,h,c,function(){$.ajax({url:r,type:"DELETE"}).done(function(n){n.success?(i.closest(t.divListItem).remove(),f(!1,e),l(o),n.message&&ALERTSYSTEM.ShowSuccessMessage(n.message,function(){n.url&&(window.location=n.url)})):ALERTSYSTEM.ShowWarningMessage(n.message)})})})}function tt(){n.containerDetails.on("change",t.chkRemote,function(){var t=$(this).is(":checked");t?n.location.val("").hide():n.location.val("").show()})}function it(){n.containerDetails.on("click",".jobposition-button",function(){var n=$(this),t=n.closest(".jobposition-item"),e=t.data("id"),u=n.data("vote"),o=t.data("currentuservote")===u,f;if(i==="true"&&!o)return f=r+"/vote",$.post(f,{votingItemId:e,voteValue:u}).then(function(n){n.success===!0?ALERTSYSTEM.ShowSuccessMessage("Awesome!",function(){location.reload()}):ALERTSYSTEM.ShowWarningMessage("An error occurred! Check the console!")})})}function f(t,i){n.list.html(MAINMODULE.Default.Spinner);n.containerDetails.html("");n.containerDetails.hide();$.get(i,function(i){t?(n.list.html(i),n.containerList.show(),c()):n.list.html(i)})}function l(t){n.myPositionStats.html(MAINMODULE.Default.SpinnerTop);$.get(t,function(t){n.myPositionStats.html(t)})}function rt(){n.containerDetails.html(MAINMODULE.Default.Spinner);n.containerList.hide();$.get(r+"/new",function(i){n.containerDetails.html(i);n.containerDetails.show();n.form=$(t.form);$.validator.unobtrusive.parse(t.form);y()})}function ut(i){n.containerDetails.html(MAINMODULE.Default.Spinner);n.containerList.hide();$.get(i,function(i){n.containerDetails.html(i);n.containerDetails.show();n.form=$(t.form);$.validator.unobtrusive.parse(n.form)})}function ft(t){var i=n.form.attr("action"),r=n.form.serialize();$.post(i,r).done(function(n){n.success===!0?(t&&t(),ALERTSYSTEM.ShowSuccessMessage("Awesome!",function(){window.location=n.url})):ALERTSYSTEM.ShowWarningMessage("An error occurred! Check the console!")})}var r="/work/jobposition",e=r+"/list",o=r+"/myPositionsStats",t={},n={},i=!1,s=!1,h=!1,u=!1;return{Init:a}}(),CONTENTACTIONS;$(function(){JOBPOSITION.Init()});CONTENTACTIONS=function(){"use strict";function r(){u();f()}function u(){}function f(){e();o();s();h();c()}function e(){$(".content").on("click",".btn-interaction-like",function(){var n=$(this),t=n.closest(".box-content").find(".like-count"),i=n.data("id");n.hasClass("like-liked")?v(i).done(function(i){y(i,t,n)}):l(i).done(function(i){a(i,t,n)})})}function o(){$(".content").on("click",".btn-interaction-comment",function(){$(this).closest(".box-content").find("textarea.commentbox").val("").focus()})}function s(){$(".content").on("keyup","textarea.commentbox",function(r){var f=$(this);if((r.keyCode===10||r.keyCode===13)&&r.ctrlKey){var u=f.closest(".interaction-commentbox").find(".commenttextarea"),o=u.data("url"),s=f.closest(".box-content").find(".comment-count"),h=u.data("usercontentid"),e=u.val().replace(/\n/g,"<br>\n"),c=u.data("usercontenttype");e.length>0&&n(o,h,e,c).done(function(n){t(n,s,u)})}i(this)})}function h(){$(".content").on("click",".btn-interaction-comment-send",function(){var u=$(this),i=u.closest(".interaction-commentbox").find(".commenttextarea"),f=i.data("url"),e=i.closest(".box-content"),o=e.find(".comment-count"),s=i.data("usercontentid"),r=i.val().replace(/\n/g,"<br>\n"),h=i.data("usercontenttype");r.length>0&&n(f,s,r,h).done(function(n){t(n,o,i)})})}function c(){$("body").on("click",".btn-interaction-share",function(n){n.preventDefault();var i=$(this).closest(".box").find(".contenturl"),t=i.prop("href");console.log(t);FB.ui({method:"share",href:t},function(){})})}function l(n){return $.post("/content/like",{targetId:n})}function a(n,t,i){n.success===!0&&($(t).text(n.value),i.addClass("text-blue"),i.addClass("like-liked"))}function v(n){return $.post("/content/unlike",{targetId:n})}function y(n,t,i){n.success===!0&&($(t).text(n.value),i.removeClass("text-blue"),i.removeClass("like-liked"))}function n(n,t,i,r){return(n===null||n===undefined||n.length===0)&&(n="/content/comment"),$.post(n,{UserContentId:t,Text:i,UserContentType:r})}function t(n,t,i){var u,f,r,e,o;n.success===!0&&(u=i.closest(".interaction-commentbox"),f=i.val().replace(/\n/g,"<br>\n"),i.val(""),$(t).text(n.value),CONTENTACTIONS.AutosizeTextArea(i[0]),r=$(".box-comment-template").first().clone(),e=u.find("img").attr("src"),r.find("img").attr("src",e),r.find(".comment-authorname").text(u.data("fullname")),r.find(".comment-content").html(f),o=i.closest(".box-comments").find(".box-commentsection"),o.append(r.removeClass("d-none")))}function i(n){setTimeout(function(){n.style.cssText="height:auto;";n.style.cssText="height:"+(n.scrollHeight+2)+"px"},0)}return{Init:r,AutosizeTextArea:i}}();$(function(){CONTENTACTIONS.Init()});