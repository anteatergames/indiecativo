var ARTICLES=function(){"use strict";function i(){r();u();f();ACTIVITYFEED.Init(n.divActivityFeed,FEEDTYPE.ARTICLES);ACTIVITYFEED.Methods.LoadActivityFeed()}function r(){t.divActivityFeed="#divActivityFeed"}function u(){n.divActivityFeed=$("#divActivityFeed")}function f(){}var t={},n={};return{Init:i}}(),FEEDTYPE,ACTIVITYFEED;$(function(){ARTICLES.Init()});FEEDTYPE={HOME:1,USER:2,GAME:3,ARTICLES:4};ACTIVITYFEED=function(){"use strict";function e(u,f,e){r=f;i=e;n.divActivityFeed=u;t.btnMorePosts="#btnMorePosts";t.btnDeletePost=".btnDeletePost";o()}function o(){s();h()}function s(){$("body").on("click",t.btnMorePosts,function(){var n=$(this);u=n.data("oldestid");f=n.data("oldestdate");n.html(MAINMODULE.Default.SpinnerBtn);ACTIVITYFEED.Methods.LoadActivityFeed(!1)})}function h(){$("body").on("click",t.btnDeletePost,function(n){n.preventDefault();var t=$(this),i=t.data("id"),r=t.data("confirmationmessage"),u=t.data("confirmationtitle"),f=t.data("confirmationbuttontext"),e=t.data("cancelbuttontext");return ALERTSYSTEM.ShowConfirmMessage(u,r,f,e,function(){$.ajax({url:"/content/"+i,type:"DELETE"}).done(function(n){if(n.success){var i=t.closest(".box-content");i.remove();n.message&&ALERTSYSTEM.ShowSuccessMessage(n.message)}else ALERTSYSTEM.ShowWarningMessage(n.message)})}),!1})}function c(e,o){e!==!1&&n.divActivityFeed.append(MAINMODULE.Default.Spinner);var s="/content/feed?load=1";i&&r===FEEDTYPE.USER&&(s+="&userId="+i);i&&r===FEEDTYPE.GAME&&(s+="&gameId="+i);r===FEEDTYPE.ARTICLES&&(s+="&articlesOnly=True");u&&(s+="&oldestId="+u);f&&(s+="&oldestDate="+f);$.get(s,function(i){f!==undefined&&u!==undefined?(n.divActivityFeed.find(".spinner").remove(),$(t.btnMorePosts).parent().remove(),n.divActivityFeed.append(i)):n.divActivityFeed.html(i);l();o&&o()})}function l(){if(typeof Embedo=="function"){var n=$("oembed");n.each(function(n,t){var i=$(t).closest(".videoWrapper"),r,u;i.hasClass("loaded")||($(t).find("embed").hide(),r=i.width(),u=r*9/16,embedo.load(t,t.innerHTML,{width:r,height:u,centerize:!0,strict:!1}).done(function(){i.addClass("loaded")}))})}}var n={},t={},r,i,u,f;return{Init:e,Methods:{LoadActivityFeed:c},Events:{}}}();