var TRANSLATION=function(){"use strict";function c(){t.controlsidebar=".control-sidebar";t.canInteract="#caninteract";t.urls="#urls";t.container="#featurecontainer";t.containerDetails="#containerdetails";t.containerList="#containerlist";t.list="#divList";t.divListItem=".feature-item";t.myProjects="#divMyProjects";t.btnNew="#btn-new";t.form="#frmTranslationSave";t.btnSave="#btnSaveTranslation";t.btnEdit=".btnEditTranslationProject";t.btnDelete=".btnDeleteTranslationProject";t.divTerms="#divTerms";t.term=".translation-term";t.template=".translation-term.template";t.btnAddTerm="#btn-translation-term-add"}function l(){console.log("cacheObjsCommon");n.controlsidebar=$(t.controlsidebar);n.container=$(t.container);n.urls=$(t.urls);n.containerDetails=$(t.containerDetails)}function a(){console.log("cacheObjsIndex");n.containerDetails=$(t.containerDetails);n.containerList=$(t.containerList);n.list=$(t.list);n.myProjects=$(t.myProjects)}function v(){}function y(){n.form=$(t.form);n.divTerms=$(t.divTerms)}function f(){y();$.validator.unobtrusive.parse(n.form);e();tt()}function p(){v();d()}function w(){if(c(),l(),b(),i=n.container.find(t.canInteract).val(),s=window.location.href.indexOf("add")>-1,r=window.location.href.indexOf("details")>-1,u=window.location.href.indexOf("edit")>-1,o=!s&&!r&&!u,o){a();var e=n.urls.data("urlList"),h=n.urls.data("urlMine");it(!1,e);rt(!1,h)}else r?p():u&&f()}function b(){k();g();nt()}function k(){n.container.on("click",t.btnNew,function(){var n=$(this).data("url");i&&ut(n)})}function d(){e();CONTENTACTIONS.BindShareContent()}function e(){$("[data-toggle='popover']").popover()}function g(){n.containerDetails.on("click",t.btnSave,function(){var t=$(this),u,r,f;$.validator.unobtrusive.parse(n.form);u=n.form.valid();u&&i?(r=!0,f=n.form.find(":input[data-val-required]"),f.each(function(){r===!0&&$(this).val().length===0&&(r=!1)}),r?(MAINMODULE.Common.RemoveErrorFromButton(t),MAINMODULE.Common.DisableButton(t),ot(t)):ALERTSYSTEM.ShowWarningMessage("All terms must have key and value!")):MAINMODULE.Common.SetButtonWithError(t)})}function nt(){n.container.on("click",t.btnEdit,function(n){n.preventDefault();var t=$(this).data("url");i&&ft(t)})}function tt(){n.container.on("click",t.btnAddTerm,function(n){return n.preventDefault(),et(),!1})}function it(t,i){n.list.html(MAINMODULE.Default.Spinner);n.containerDetails.html("");n.containerDetails.hide();$.get(i,function(i){t?(n.list.html(i),n.containerList.show(),cacheObjects()):n.list.html(i)})}function rt(t,i){n.myProjects.html(MAINMODULE.Default.SpinnerTop);$.get(i,function(i){t?(n.myProjects.html(i),n.containerList.show(),cacheObjects()):n.myProjects.html(i)})}function ut(i){n.containerDetails.html(MAINMODULE.Default.Spinner);n.containerList.hide();$.get(i,function(i){n.containerDetails.html(i);n.containerDetails.show();n.form=$(t.form);$.validator.unobtrusive.parse(t.form);f()})}function ft(t){n.containerDetails.html(MAINMODULE.Default.Spinner);n.containerList&&n.containerList.hide();$.get(t,function(t){n.containerDetails.html(t);n.containerDetails.show();f()})}function et(){var i=$(t.template).first().clone();i.find(":input").val("");i.removeClass("template");i.prependTo(t.divTerms);i.find("input.form-control").first().focus();MAINMODULE.Common.RenameInputs(n.divTerms,t.term,h);e()}function ot(t,i){var r=n.form.attr("action"),u=n.form.serialize();$.post(r,u).done(function(n){n.success===!0?(MAINMODULE.Common.PostSaveCallback(n,t),i&&i(),ALERTSYSTEM.ShowSuccessMessage("Awesome!",function(){window.location=n.url})):ALERTSYSTEM.ShowWarningMessage("An error occurred! Check the console!")})}var t={},n={},i=!1,o=!1,s=!1,r=!1,u=!1,h="Terms";return{Init:w}}(),CONTENTACTIONS;$(function(){TRANSLATION.Init()});CONTENTACTIONS=function(){"use strict";function e(){o();s();h()}function o(){n.container=".content";n.btnShare=".btn-share";n.sharePopup=".share-popup";n.btnInteractionComment=".btn-interaction-comment";n.commentBox=".interaction-commentbox";n.commentTextArea=".commenttextarea";n.btnInteractionShare=".btn-interaction-share";n.sharePopup=".share-popup"}function s(){t.container=$(n.container)}function h(){c();l();a();v();y();i()}function c(){t.container.on("click",".btn-interaction-like",function(){var n=$(this),t=n.closest(".box-content").find(".like-count"),i=n.data("id");n.hasClass("like-liked")?b(i).done(function(i){k(i,t,n)}):p(i).done(function(i){w(i,t,n)})})}function l(){$(".content").on("click",n.btnInteractionComment,function(){var t=$(this),i=t.closest(".box-content").find(".box-commentsection"),r=t.closest(".box-content").find(n.commentBox),u=t.closest(".box-content").find(n.commentTextArea);i.is(":visible")?(i.addClass("d-none"),r.addClass("d-none")):(i.removeClass("d-none"),r.removeClass("d-none"),u.val("").focus())})}function a(){$(".content").on("keyup","textarea.commentbox",function(n){var i=$(this);if((n.keyCode===10||n.keyCode===13)&&n.ctrlKey){var t=i.closest(".interaction-commentbox").find(".commenttextarea"),o=t.data("url"),s=i.closest(".box-content").find(".comment-count"),h=t.data("usercontentid"),e=t.val().replace(/\n/g,"<br>\n"),c=t.data("usercontenttype");e.length>0&&r(o,h,e,c).done(function(n){u(n,s,t)})}f(this)})}function v(){$(".content").on("click",".btn-interaction-comment-send",function(){var i=$(this),n=i.closest(".interaction-commentbox").find(".commenttextarea"),f=n.data("url"),e=n.closest(".box-content"),o=e.find(".comment-count"),s=n.data("usercontentid"),t=n.val().replace(/\n/g,"<br>\n"),h=n.data("usercontenttype");t.length>0&&r(f,s,t,h).done(function(t){u(t,o,n)})})}function y(){t.container.on("click",n.btnShare,function(t){var u;t.preventDefault();$(n.sharePopup).fadeOut();var i=$(this).prop("href"),f=$(this).data("title"),r=$(this).data("provider");return i=encodeURI(i),r==="facebook"?FB.ui({method:"share",href:i},function(){}):r==="reddit"?(i="https://www.reddit.com/submit?title="+f+"&url="+i,window.open(i)):r==="twitter"?(u=$(this).data("text"),i="https://www.twitter.com/intent/tweet?text="+u+" "+i,window.open(i)):console.log(r),!1})}function i(){$(n.btnInteractionShare).each(function(t,i){var r=$(i),u=r.data();if(u.target){$(r).off("click");$(r).on("click",function(){console.log("clickshare");var t=$(u.target),i=r.position();t.css("top",i.top-80);t.on("mouseleave",function(){setTimeout(function(){t.is(":visible")&&t.fadeOut()},500)});$(n.sharePopup).fadeOut();t.is(":visible")?t.fadeOut():t.fadeIn()})}})}function p(n){return $.post("/content/like",{targetId:n})}function w(n,t,i){n.success===!0&&($(t).text(n.value),i.addClass("text-blue"),i.addClass("like-liked"))}function b(n){return $.post("/content/unlike",{targetId:n})}function k(n,t,i){n.success===!0&&($(t).text(n.value),i.removeClass("text-blue"),i.removeClass("like-liked"))}function r(n,t,i,r){return(n===null||n===undefined||n.length===0)&&(n="/content/comment"),$.post(n,{UserContentId:t,Text:i,UserContentType:r})}function u(n,t,i){var u,f,r,e,o;n.success===!0&&(u=i.closest(".interaction-commentbox"),f=i.val().replace(/\n/g,"<br>\n"),i.val(""),$(t).text(n.value),CONTENTACTIONS.AutosizeTextArea(i[0]),r=$(".box-comment-template").first().clone(),e=u.find("img").attr("src"),r.find("img").attr("src",e),r.find(".comment-authorname").text(u.data("fullname")),r.find(".comment-content").html(f),o=i.closest(".box-comments").find(".box-commentsection"),o.append(r.removeClass("d-none")))}function f(n){setTimeout(function(){n.style.cssText="height:auto;";n.style.cssText="height:"+(n.scrollHeight+2)+"px"},0)}var n={},t={};return{Init:e,AutosizeTextArea:f,BindShareContent:i}}();$(function(){CONTENTACTIONS.Init()});