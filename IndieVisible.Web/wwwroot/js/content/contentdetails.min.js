var CONTENTDETAILS=function(){"use strict";function n(){t();i()}function t(){}function i(){}return{Init:n}}(),POLLS;$(function(){CONTENTDETAILS.Init()});POLLS=function(){"use strict";function t(){i();r()}function i(){n.divPostPoll=$("div#divPostPoll");n.options=$("input.polloptioninput")}function r(){u();f();e()}function u(){$(".content").on("click","#btnAddOption",function(){var u=n.divPostPoll.children(".polloption:first"),t=u.clone(),i=t.children(".polloptioninput"),r;i.val("");r=t.find(".btn-option-remove");$(r).removeClass("invisible");t.insertBefore("#btnAddOption");t.addClass("polloptionextra");i.focus();POLLS.Events.PostAddOption()})}function f(){$(".content").on("click",".btn-option-remove",function(){var n=$(this).closest(".polloption");n.remove();POLLS.Events.PostAddOption()})}function e(){$(".content").on("click","ul.poll.canvote li input.poll-option",function(){var n=$(this);s(n.val()).done(function(t){h(t,n)})})}function o(){n.options.val("");$(".polloptionextra").remove()}function s(n){return $.post("/interact/poll/vote",{pollOptionId:n}).done(function(n){n.success&&MAINMODULE.Common.HandlePointsEarned(n)})}function h(n,t){var u,e,i;if(n.success===!0){var r=t.closest("ul.poll"),s=r.closest(".poll-wrapper"),h=s.find(".poll-vote-count"),c=r.children("li");for($(c).each(function(){var n=$(this);n.removeClass("voted").addClass("notvoted");var t=n.children("span.perc-back"),i=n.children("span.perc-number"),r=n.find("input");t.css("width","0");i.text("0.00%");r.prop("checked",!1)}),u=$(t).parent("li"),u.removeClass("notvoted").addClass("voted"),e=u.find("input"),e.prop("checked",!0),i=0;i<n.value.optionResults.length;i++){var f=n.value.optionResults[i],l=r.find(`input[value="${f.optionId}"]`),o=l.parent("li"),a=o.children("span.perc-back"),v=o.children("span.perc-number");a.css("width",f.percentage+"%");v.text(f.percentage+"%")}h.text(n.value.totalVotes)}}var n={};return{Init:t,Methods:{ClearOptions:o},Events:{PostAddOption:function(){}}}}();$(function(){POLLS.Init()});