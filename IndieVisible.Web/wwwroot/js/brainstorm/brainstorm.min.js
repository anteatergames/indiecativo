var BRAINSTORM=function(){"use strict";function u(){f();e();a();t=n.container.data("caninteract")}function f(){n.container=$("#brainstormcontainer");n.toolbar=$("#divToolbar");n.list=$("#divList");n.btnPostVotingItem=$("#btnPostVotingItem")}function e(){o();s();h();c();l()}function o(){n.container.on("click",".btn-idea-new",function(){t&&v()})}function s(){n.container.on("click",".btn-session-new",function(){t&&y()})}function h(){n.container.on("click","#btnPostBrainstormIdea",function(){var i=n.form.valid();i&&t&&r()})}function c(){n.container.on("click","#btnPostBrainstormSession",function(){var i=n.form.valid();i&&t&&r()})}function l(){n.container.on("click",".brainstorm-button",function(){var n=$(this),r=n.closest(".brainstorm-item"),e=r.data("id"),u=n.data("vote"),o=r.data("currentuservote")===u,f;if(t&&!o)return f=i+"/vote",$.post(f,{votingItemId:e,voteValue:u}).then(function(n){n.success===!0?ALERTSYSTEM.ShowSuccessMessage("Awesome!",function(){location.reload()}):ALERTSYSTEM.ShowWarningMessage("An error occurred! Check the console!")})})}function a(){n.list.html(MAINMODULE.Default.Spinner);var t="/list",r=$("#Id").val();r&&(t+="/"+r);$.get(i+t,function(t){n.list.html(t)})}function v(){var t=$("#brainstormcontainer #Id").val();n.container.html(MAINMODULE.Default.Spinner);$.get(i+"/newidea?sessionId="+t,function(t){n.container.html(t);n.form=$("#frmBrainstormIdeaSave");$.validator.unobtrusive.parse(n.form)})}function y(){n.container.html(MAINMODULE.Default.Spinner);$.get(i+"/newsession",function(t){n.container.html(t);n.form=$("#frmBrainstormSessionSave");$.validator.unobtrusive.parse(n.form)})}function r(t){var i=n.form.attr("action"),r=n.form.serialize();$.post(i,r).done(function(n){n.success===!0?(t&&t(),ALERTSYSTEM.ShowSuccessMessage("Awesome!",function(){window.location=n.url})):ALERTSYSTEM.ShowWarningMessage("An error occurred! Check the console!")})}var i="/brainstorm",n={},t=!1;return{Init:u}}(),CONTENTACTIONS;$(function(){BRAINSTORM.Init()});CONTENTACTIONS=function(){"use strict";function r(){u();f()}function u(){}function f(){e();o();s();h();c()}function e(){$(".content").on("click",".btn-interaction-like",function(){var n=$(this),t=n.closest(".box-content").find(".like-count"),i=n.data("id");n.hasClass("like-liked")?v(i).done(function(i){y(i,t,n)}):l(i).done(function(i){a(i,t,n)})})}function o(){$(".content").on("click",".btn-interaction-comment",function(){$(this).closest(".box-content").find("textarea.commentbox").val("").focus()})}function s(){$(".content").on("keyup","textarea.commentbox",function(r){var e=$(this),o=e.closest(".box-content").find(".comment-count");if((r.keyCode===10||r.keyCode===13)&&r.ctrlKey){var u=$(this),s=u.data("usercontentid"),f=u.val(),h=u.data("usercontenttype");f.length>0&&n(s,f,h).done(function(n){t(n,o,u)})}i(this)})}function h(){$(".content").on("click",".btn-interaction-comment-send",function(){var u=$(this),i=u.closest(".interaction-commentbox").find(".commenttextarea"),f=i.closest(".box-content"),e=f.find(".comment-count"),o=i.data("usercontentid"),r=i.val().replace(/\n/g,"<br>\n"),s=i.data("usercontenttype");r.length>0&&n(o,r,s).done(function(n){t(n,e,i)})})}function c(){$("body").on("click",".btn-interaction-share",function(){var n=$(this).closest(".box").find(".contenturl"),t=n.prop("href");FB.ui({method:"share",href:t},function(){})})}function l(n){return $.post("/interact/content/like",{targetId:n})}function a(n,t,i){n.success===!0&&($(t).text(n.value),i.addClass("text-blue"),i.addClass("like-liked"))}function v(n){return $.post("/interact/content/unlike",{targetId:n})}function y(n,t,i){n.success===!0&&($(t).text(n.value),i.removeClass("text-blue"),i.removeClass("like-liked"))}function n(n,t,i){return $.post("/interact/content/comment",{UserContentId:n,Text:t,UserContentType:i})}function t(n,t,i){var u,f,r,e,o;n.success===!0&&(u=i.closest(".interaction-commentbox"),f=i.val().replace(/\n/g,"<br>\n"),i.val(""),$(t).text(n.value),CONTENTACTIONS.AutosizeTextArea(i[0]),r=$(".box-comment-template").first().clone(),e=u.find("img").attr("src"),r.find("img").attr("src",e),r.find(".comment-authorname").text(u.data("fullname")),r.find(".comment-date").html('<i class="fa fa-asterisk"><\/i>'),r.find(".comment-content").html(f),o=i.closest(".box-comments").find(".box-commentsection"),o.append(r.removeClass("d-none")))}function i(n){setTimeout(function(){n.style.cssText="height:auto;";n.style.cssText="height:"+(n.scrollHeight+2)+"px"},0)}return{Init:r,AutosizeTextArea:i}}();$(function(){CONTENTACTIONS.Init()});