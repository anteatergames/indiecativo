var CONTENTACTIONS=function(){"use strict";function r(){u();f()}function u(){}function f(){e();o();s();h();c()}function e(){$(".content").on("click",".btn-interaction-like",function(){var n=$(this),t=n.closest(".box-content").find(".like-count"),i=n.data("id");n.hasClass("like-liked")?v(i).done(function(i){y(i,t,n)}):l(i).done(function(i){a(i,t,n)})})}function o(){$(".content").on("click",".btn-interaction-comment",function(){$(this).closest(".box-content").find("textarea.commentbox").val("").focus()})}function s(){$(".content").on("keyup","textarea.commentbox",function(r){var e=$(this),o=e.closest(".box-content").find(".comment-count");if((r.keyCode===10||r.keyCode===13)&&r.ctrlKey){var u=$(this),s=u.data("usercontentid"),f=u.val(),h=u.data("usercontenttype");f.length>0&&n(s,f,h).done(function(n){t(n,o,u)})}i(this)})}function h(){$(".content").on("click",".btn-interaction-comment-send",function(){var u=$(this),i=u.closest(".interaction-commentbox").find(".commenttextarea"),f=i.data("url"),e=i.closest(".box-content"),o=e.find(".comment-count"),s=i.data("usercontentid"),r=i.val().replace(/\n/g,"<br>\n"),h=i.data("usercontenttype");r.length>0&&n(f,s,r,h).done(function(n){t(n,o,i)})})}function c(){$("body").on("click",".btn-interaction-share",function(n){n.preventDefault();var t=$(this).closest(".box").find(".contenturl"),i=t.prop("href");FB.ui({method:"share",href:i},function(){})})}function l(n){return $.post("/interact/content/like",{targetId:n})}function a(n,t,i){n.success===!0&&($(t).text(n.value),i.addClass("text-blue"),i.addClass("like-liked"))}function v(n){return $.post("/interact/content/unlike",{targetId:n})}function y(n,t,i){n.success===!0&&($(t).text(n.value),i.removeClass("text-blue"),i.removeClass("like-liked"))}function n(n,t,i,r){return(n===null||n===undefined||n.length===0)&&(n="/interact/content/comment"),$.post(n,{UserContentId:t,Text:i,UserContentType:r})}function t(n,t,i){var u,f,r,e,o;n.success===!0&&(u=i.closest(".interaction-commentbox"),f=i.val().replace(/\n/g,"<br>\n"),i.val(""),$(t).text(n.value),CONTENTACTIONS.AutosizeTextArea(i[0]),r=$(".box-comment-template").first().clone(),e=u.find("img").attr("src"),r.find("img").attr("src",e),r.find(".comment-authorname").text(u.data("fullname")),r.find(".comment-date").html('<i class="fa fa-asterisk"><\/i>'),r.find(".comment-content").html(f),o=i.closest(".box-comments").find(".box-commentsection"),o.append(r.removeClass("d-none")))}function i(n){setTimeout(function(){n.style.cssText="height:auto;";n.style.cssText="height:"+(n.scrollHeight+2)+"px"},0)}return{Init:r,AutosizeTextArea:i}}();$(function(){CONTENTACTIONS.Init()});var FEEDTYPE={HOME:1,USER:2,GAME:3},ACTIVITYFEED=function(){"use strict";function e(r,u,e){f=u;i=e;n.divActivityFeed=r;t.btnMorePosts="#btnMorePosts";t.btnDeletePost=".btnDeletePost";o()}function o(){s();h()}function s(){$("body").on("click",t.btnMorePosts,function(){var n=$(this);r=n.data("oldestid");u=n.data("oldestdate");ACTIVITYFEED.Methods.LoadActivityFeed()})}function h(){$("body").on("click",t.btnDeletePost,function(n){n.preventDefault();var t=$(this),i=t.data("id"),r=t.data("confirmationmessage"),u=t.data("confirmationtitle"),f=t.data("confirmationbuttontext"),e=t.data("cancelbuttontext");return ALERTSYSTEM.ShowConfirmMessage(u,r,f,e,function(){$.ajax({url:"/content/"+i,type:"DELETE"}).done(function(n){if(n.success){var i=t.closest(".box-content");i.remove();n.message&&ALERTSYSTEM.ShowSuccessMessage(n.message)}else ALERTSYSTEM.ShowWarningMessage(n.message)})}),!1})}function c(e){n.divActivityFeed.append(MAINMODULE.Default.Spinner);var o="/content/feed?load=1";i&&f===FEEDTYPE.USER&&(o+="&userId="+i);i&&f===FEEDTYPE.GAME&&(o+="&gameId="+i);r&&(o+="&oldestId="+r);u&&(o+="&oldestDate="+u);$.get(o,function(i){u!==undefined&&r!==undefined?(n.divActivityFeed.find(".spinner").remove(),$(t.btnMorePosts).parent().remove(),n.divActivityFeed.append(i)):n.divActivityFeed.html(i);e&&e()})}var n={},t={},f,i,r,u;return{Init:e,Methods:{LoadActivityFeed:c},Events:{}}}(),GAMEDETAILS=function(){"use strict";function t(){i();r();ACTIVITYFEED.Init(n.divActivityFeed,FEEDTYPE.GAME,n.Id.val());ACTIVITYFEED.Methods.LoadActivityFeed()}function i(){n.tabActivity=$("#tabactivity");n.divActivityFeed=$("#tabactivity #divActivityFeed");n.Id=$("#Id")}function r(){u();f();e()}function u(){$(".content").on("click","#btn-game-like",function(){var n=$(this),t=n.closest(".game-page").find(".like-count"),i=n.data("id");n.hasClass("like-liked")?h(i).done(function(i){c(i,t,n)}):o(i).done(function(i){s(i,t,n)})})}function f(){$(".content").on("click","#btn-game-follow",function(){var n=$(this),t=n.closest(".game-page").find(".follow-count"),i=n.data("id");n.hasClass("follow-following")?v(i).done(function(i){y(i,t,n)}):l(i).done(function(i){a(i,t,n)})})}function e(){$(".content").on("click","#btn-game-share",function(n){n.preventDefault();var t=$(this).prop("href");FB.ui({method:"share",href:t},function(){})})}function o(n){return $.post("/interact/game/like",{likedId:n})}function s(n,t,i){n.success===!0?($(t).text(n.value),i.addClass("bg-red"),i.addClass("like-liked")):ALERTSYSTEM.ShowWarningMessage(n.message)}function h(n){return $.post("/interact/game/unlike",{likedId:n})}function c(n,t,i){n.success===!0?($(t).text(n.value),i.removeClass("bg-red"),i.removeClass("like-liked")):ALERTSYSTEM.ShowWarningMessage(n.message)}function l(n){return $.post("/interact/game/follow",{gameId:n})}function a(n,t,i){n.success===!0?($(t).text(n.value),i.addClass("bg-blue"),i.addClass("follow-following")):ALERTSYSTEM.ShowWarningMessage(n.message)}function v(n){return $.post("/interact/game/unfollow",{gameId:n})}function y(n,t,i){n.success===!0?($(t).text(n.value),i.removeClass("bg-blue"),i.removeClass("follow-following")):ALERTSYSTEM.ShowWarningMessage(n.message)}var n={};return{Init:t}}();$(function(){GAMEDETAILS.Init()});